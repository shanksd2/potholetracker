@using Capstone.Web.Models
@model List<Pothole>
@{ int listCount = Model.Count;}

<script src="~/Scripts/viewpothole.js"></script>

<div class="container">
    <h4 class="headersmall">Reported Potholes</h4>
    <div id="wrapper">
        <div id="map"></div>
    </div>
    <span id="listcount" hidden>@listCount</span>
    <table class="table">
        <tr>
            <th>Pothole ID</th>
            <th>Latitude, Longitude</th>
            <th>Pothole Status</th>
            <th>Pothole Severity</th>
            <th>Date Reported</th>
            <th>Inspection Date</th>
            <th>Repair Date</th>
            <th></th>
            <th></th>
        </tr>
        @{int count = 0; }
        @foreach (var pothole in Model)
        {
            count++;
            string lat = $"lat{count}";
            string lng = $"lng{count}";
            <tr>
                <td id="count">@pothole.PotholeID</td>
                <td><span id="@lat">@pothole.Latitude</span>, <span id="@lng">@pothole.Longitude</span></td>
                <td>@pothole.Status</td>
                <td>@pothole.ReturnSeverity(pothole.Severity)</td>
                <td>@pothole.DateReported.ToShortDateString() </td>
                @{if (pothole.InspectDate != null && pothole.RepairDate == null)
                    {
                        <td>@pothole.InspectDate.Value.ToShortDateString() </td>
                        <td></td>
                    }
                    else if (pothole.InspectDate != null && pothole.RepairDate != null)
                    {
                        <td>@pothole.RepairDate.Value.ToShortDateString() </td>
                    }
                    else
                    {
                        <td></td>
                        <td></td>
                    }
                    <td><a id="@pothole.PotholeID" class="btn btn-danger" href="~/Home/ViewPotholesForEmp2/@pothole.PotholeID">Delete</a></td>
                    <td><a class="btn btn-primary" href="~/Home/UpdatePothole/@pothole.PotholeID">Update</a></td>
                }
            </tr>

        }

    </table>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBSatSYUL3YwnEgUtqsIpU1Cd-mR9OT148&callback=initMap"></script>
